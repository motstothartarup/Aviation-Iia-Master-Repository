<!doctype html>
<meta charset="utf-8">
<title>ACA Airports — Region Table</title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="0"/>
<style>
  body { margin:0; padding:24px; font:14px/1.4 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif; background:#f6f8fb; }
  .wrap { max-width:1100px; margin:0 auto; }
  .card { background:#fff; border-radius:12px; box-shadow:0 4px 20px rgba(0,0,0,.08); padding:20px; }
  h1 { margin:0 0 12px 0; font-size:20px; }
  .row { display:flex; gap:16px; align-items:center; flex-wrap:wrap; }
  .muted { color:#6b7785; font-size:12px; }
  table { width:100%; border-collapse:collapse; margin-top:14px; font-size:13px; }
  thead th { text-align:left; font-weight:600; padding:6px 8px; border-bottom:1px solid #ddd; background:#fafbfc; }
  tbody td { padding:6px 8px; border-bottom:1px solid #eee; vertical-align:top; }
  td.lvl { font-weight:700; width:100px; white-space:nowrap; }
  td.count { text-align:right; width:60px; color:#6b7785; }
  td.codes code { font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; font-size:12px; padding:2px 6px; border-radius:6px; margin:2px 4px 2px 0; display:inline-block; }
  code.comp { background:#fff3cd; color:#000; border:1px solid #f1c40f; }
  code.hl { background:#e74c3c; color:#fff; font-size:14px; font-weight:700; }
  #downloadBtn { margin-top:10px; padding:6px 12px; border-radius:6px; border:none; background:#3498db; color:#fff; cursor:pointer; }
</style>

<div class="wrap">
  <div class="card" id="captureArea">
    <div class="row">
      <h1>ACA Airports by Region</h1>
      <div class="muted">Last updated: 2025-12-02 23:51 UTC</div>
    </div>
    <div class="row" style="margin-top:8px;">
      <label for="regionSelect" class="muted">Region:</label>
      <select id="regionSelect" aria-label="Choose region"></select>
    </div>

    <table id="acaTable">
      <thead>
        <tr>
          <th>ACA Level</th>
          <th>Airport Codes</th>
          <th style="text-align:right">Count</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <button id="downloadBtn">Download as JPEG</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script id="aca-data" type="application/json">{"levels_desc":["Level 5","Level 4+","Level 4","Level 3+","Level 3","Level 2","Level 1"],"regions":["Americas","Africa","Asia Pacific & Middle East","Europe"],"by_region":{"Americas":{"Level 5":["SSA"],"Level 4+":["DFW","GPS","SAN","UIO","YVR"],"Level 4":["BOG","DAL","FLN","LAX","MEA","OAK","PHX","SFO","VIX","VNY","YUL","YYZ"],"Level 3+":["AUS","CNF","GYE","SJO","STI"],"Level 3":["2R2","8A4","ACA","AGU","AUA","AZS","BJX","BRX","CJS","CUL","CUN","CUU","CZM","DGO","DTW","DVT","EFD","EPS","EWR","EYE","FDF","GDL","GIG","GYR","HNL","HOU","HUX","IAH","IND","JBQ","JFK","KOA","LAP","LGA","LIH","LIM","MID","MLM","MQJ","MSP","MTT","MTY","MXL","MZT","OAX","PHL","PNE","POP","PTP","PVR","QRO","REX","SAT","SDQ","SEA","SLC","SLP","SSF","SWF","TAM","TAP","TEB","TRC","UMP","VER","VSA","YEG","YHZ","YLW","YOW","YQB","YWG","YYG","ZCL","ZIH","ZLO"],"Level 2":["AEP","ATL","BDA","BFI","BOS","BSB","BUR","CMH","COR","CRD","CUR","CVG","EZE","GRR","HMO","IGR","JAC","KIN","LGB","LIR","LMM","MBJ","MDZ","MVD","PIT","PUJ","SBP","SCL","SJC","SJD","SJU","SNA","TIJ","TPA","YCD","YHM","YMM","YQM","YQQ","YQR","YQT","YXE","YYJ"],"Level 1":["21D","ABQ","AGC","AJU","APF","BRC","BTV","CLE","CLQ","CLT","CME","CPV","CVM","CWB","DCA","FCM","GYN","HPN","HSH","IAD","IGU","ITO","JDO","JPA","JUJ","KANE","KLVN","LAS","LTO","MCZ","MIA","MIC","NAS","NLU","NVT","OGG","PAZ","PBC","PDP","PRA","PXM","REC","RGA","SDF","SDU","SLA","SLZ","STP","TCN","TPQ","TUC","TVY","U42","VGT","YFC","YHU","YKF","YRQ","YSJ","YTZ","YYC","YYT"]},"Africa":{"Level 5":[],"Level 4+":["ABJ","RUN"],"Level 4":["NBE"],"Level 3+":["BZV","LBV"],"Level 3":["CMN","DSS","DUR","EDL","KIS","MBA","NBO","NOS","RAK","RBA","TNR"],"Level 2":["CPT","FEZ","JNB","KGL","LFW","LOS","MIR","PLZ"],"Level 1":["AGA","ASK","BVC","BYK","CKY","DAR","HGO","HLA","JIB","JRO","KEO","LUN","MJC","MMO","OUD","PNR","RAI","SFL","SID","SNE","SPY","TNG","VXE"]},"Asia Pacific & Middle East":{"Level 5":["ADL","BLR","BOM","CHC","DEL","HYD","YPPF"],"Level 4+":["AMM","NPE","NTL","WLG","ZQN"],"Level 4":["AKL","BAH","BNE","CBR","DUD","DXB","HKG","HLZ","ICN","ISA","ITM","KIX","LRE","NAN","NGO","NRT","OOL","PMR","RUH","SYD","TPE","TSV","UKB"],"Level 3+":["MCY","PPT","SHJ"],"Level 3":["AUH","BKK","CEI","CNX","DMK","DOH","DRW","DWC","HDY","KHH","KOS","KUL","MEL","MFM","PER","PNH","SIN","SLL"],"Level 2":["BME","HKT","JED","MED","NOU","NPL","PHE"],"Level 1":["ABT","AHB","AJF","AQI","BHH","BKI","CEB","DMM","DQM","DWD","EAM","EJH","ELQ","GIZ","HAS","HOF","IVC","LGK","MCT","MEB","NSN","NUM","OERB","RAE","RAH","RAR","RSI","SHW","TIF","TUI","TUU","ULH","URY","WAE","YNB"]},"Europe":{"Level 5":["AMS","ARN","BYJ","EIN","FNC","GOT","HEL","IVL","KAO","KRN","KTT","LYS","MMX","NAP","NCE","OSD","PDL","RNB","RTM","RVN","TLN","VBY"],"Level 4+":["ABZ","ATH","BLQ","BMA","BRS","BRU","BUD","CEQ","CIA","CPH","CRL","EDI","ESB","FAB","FAO","FCO","FLW","GLA","GVA","HOR","LCA","LCY","LGW","LHR","LIN","LIS","LLA","LTT","LUX","LYN","MXP","OPO","ORY","PFO","PXO","SMA","SOU","TLS","UME","VCE"],"Level 4":["BCN","BGY","BSL","BVA","CDG","CFN","IST","LBG","LGG","LTN","MAD","MRS","NCL","NTE","PMI","SOF","ZAG","ZRH"],"Level 3+":["ADB","AGH","AYT","DUB","EMA","HAM","KEF","MAN","MLA","ORK","PMO","PRN","RIX","SDL","STN","TRN","TSF","VIE","VRN"],"Level 3":["AAL","AGP","ALC","BEG","BER","BFS","BGO","BHD","BHX","BOD","CCF","CFE","CMF","CTA","DLM","DUS","EGC","ERZ","FRA","GNB","GYD","IBZ","KLR","LBA","LDE","LIL","MAH","MPL","MST","MUC","NOC","OLB","OSL","OTP","PGF","PRG","PUF","RNS","SNR","STR","SVG","SXB","TIA","TLL","TRD","TRS","VNO"],"Level 2":["ACE","ACH","ADA","ADF","AHO","AJI","ANG","ANR","ASR","AUR","AVN","BAL","BBU","BES","BGG","BLL","BOH","BOJ","BQH","BVE","BYF","BZI","BZR","CAG","CDT","CFR","CGN","CKZ","CLJ","DBV","DIY","DNZ","DOL","EDO","ERC","EXT","EZS","FLR","FMM","GKD","GNY","GZP","GZT","HTY","IGD","ILD","ISE","KCM","KCO","KFS","KSY","KUN","KYA","LEU","LFDH","LIG","LJU","LYC","MLX","MQM","MSR","MZH","NAV","NCY","NKT","NOP","NWI","OGU","ORE","OST","PIS","PLQ","PSA","RDZ","SKP","SNN","SXZ","SZF","TBS","TEQ","TJK","TLV","TZX","USQ","VAN","VAR","VAS","YEI","YKO"],"Level 1":["BJV","BUS","CFU","CHQ","DNR","DRS","EFL","ETM","EVN","GDN","JMK","JSI","JTR","KGS","KRS","KVA","LEJ","MJT","PVK","RHO","SBZ","SCQ","SJJ","SKG","SMI","TGD","TIV","WAW","ZAD","ZTH"]}}}</script>
<script id="competitor-data" type="application/json">{"ORD":["Passengers"],"DEN":["Passengers"],"DFW":["Passengers"],"JFK":["Passengers"],"CLT":["Passengers"],"LAS":["Passengers"],"MCO":["Passengers"],"MIA":["Passengers"],"SEA":["Passengers"],"PHX":["Passengers"],"SFO":["Passengers"],"EWR":["Passengers"],"IAH":["Passengers"],"ATL":["Passengers"],"BOS":["Passengers"]}</script>
<script>
(function(){
  const DATA = JSON.parse(document.getElementById('aca-data').textContent);
  const COMP = JSON.parse(document.getElementById('competitor-data').textContent || "{}");
  const sel = document.getElementById('regionSelect');
  const tbody = document.querySelector('#acaTable tbody');
  const levels = DATA.levels_desc || [];
  const regions = DATA.regions || [];
  const byRegion = DATA.by_region || {};
  const target = "LAX";
  const defaultRegion = "Americas";

  function option(v,t){const o=document.createElement('option');o.value=v;o.textContent=t;return o;}
  regions.forEach(r=>sel.appendChild(option(r,r)));
  if (regions.includes(defaultRegion)) sel.value = defaultRegion;

  function render(region){
    tbody.innerHTML='';
    let total=0;
    const buckets = byRegion[region] || {};
    levels.forEach(lvl=>{
      const codes = (buckets[lvl] || []).slice().sort();
      total += codes.length;
      const tr = document.createElement('tr');
      const tdLvl=document.createElement('td'); tdLvl.className='lvl'; tdLvl.textContent=lvl;
      const tdCodes=document.createElement('td'); tdCodes.className='codes';
      const tdCount=document.createElement('td'); tdCount.className='count'; tdCount.textContent=String(codes.length);
      if(codes.length){
        codes.forEach(c=>{
          const chip=document.createElement('code'); chip.textContent=c;
          if (c===target) chip.classList.add('hl');
          else if (Array.isArray(COMP[c]) && COMP[c].length) chip.classList.add('comp');
          tdCodes.appendChild(chip);
        });
      } else {
        tdCodes.innerHTML='<span class="muted">—</span>';
      }
      tr.appendChild(tdLvl); tr.appendChild(tdCodes); tr.appendChild(tdCount);
      tbody.appendChild(tr);
    });
    const trTotal=document.createElement('tr');
    trTotal.innerHTML='<td class="lvl">Total</td><td></td><td class="count">'+total+'</td>';
    tbody.appendChild(trTotal);
  }

  sel.addEventListener('change', ()=>render(sel.value));
  render(sel.value || regions[0] || '');

  // Export as high-res JPEG
  document.getElementById('downloadBtn').addEventListener('click', () => {
    html2canvas(document.getElementById('captureArea'), { scale: 3 }).then(canvas => {
      const link = document.createElement('a');
      link.download = 'aca_table.jpeg';
      link.href = canvas.toDataURL('image/jpeg', 1.0);
      link.click();
    });
  });
})();
</script>
